// Map peripheral memory regions
MAP 0x40000000, 0x40007FFF READ WRITE   // APB1 peripherals (TIM2-TIM7, etc.)
MAP 0x40010000, 0x400157FF READ WRITE   // APB2 peripherals (TIM1, ADC, etc.)
MAP 0x40020000, 0x4007FFFF READ WRITE   // AHB1 peripherals (GPIO, RCC, DMA)
MAP 0x50000000, 0x500607FF READ WRITE   // AHB2 peripherals (USB OTG)
MAP 0xE0000000, 0xE00FFFFF READ WRITE   // Cortex-M4 internal (SysTick, NVIC)

// Map Flash and RAM
MAP 0x08000000, 0x080FFFFF READ EXEC    // Flash memory (EXEC added!)
MAP 0x20000000, 0x2001FFFF READ WRITE EXEC  // SRAM
MAP 0x10000000, 0x1000FFFF READ WRITE   // CCM RAM