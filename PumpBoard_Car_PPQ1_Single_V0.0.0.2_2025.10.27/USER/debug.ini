// Map peripheral memory regions for STM32F407 simulator mode
// APB1 Peripherals (42 MHz max)
MAP 0x40000000, 0x400007FF READ WRITE   // TIM2
MAP 0x40000400, 0x40000BFF READ WRITE   // TIM3-TIM7
MAP 0x40002800, 0x40002BFF READ WRITE   // RTC & BKP Registers
MAP 0x40002C00, 0x40002FFF READ WRITE   // WWDG
MAP 0x40003000, 0x400033FF READ WRITE   // IWDG
MAP 0x40003800, 0x40003BFF READ WRITE   // SPI2/I2S2
MAP 0x40003C00, 0x40003FFF READ WRITE   // SPI3/I2S3
MAP 0x40004400, 0x400047FF READ WRITE   // USART2
MAP 0x40004800, 0x40004FFF READ WRITE   // USART3-UART5
MAP 0x40005400, 0x400057FF READ WRITE   // I2C1-I2C2
MAP 0x40005C00, 0x40006FFF READ WRITE   // CAN1-CAN2
MAP 0x40007000, 0x400073FF READ WRITE   // PWR
MAP 0x40007400, 0x400077FF READ WRITE   // DAC

// APB2 Peripherals (84 MHz max)
MAP 0x40010000, 0x400103FF READ WRITE   // TIM1
MAP 0x40010400, 0x400107FF READ WRITE   // TIM8
MAP 0x40011000, 0x400113FF READ WRITE   // USART1
MAP 0x40011400, 0x400117FF READ WRITE   // USART6
MAP 0x40012000, 0x400123FF READ WRITE   // ADC1-ADC3
MAP 0x40013000, 0x400133FF READ WRITE   // SDIO
MAP 0x40013400, 0x400137FF READ WRITE   // SPI1
MAP 0x40014000, 0x400143FF READ WRITE   // SYSCFG
MAP 0x40014400, 0x400147FF READ WRITE   // EXTI
MAP 0x40014800, 0x40014FFF READ WRITE   // TIM9-TIM11

// AHB1 Peripherals (168 MHz max) - CRITICAL FOR RCC ACCESS
MAP 0x40020000, 0x400203FF READ WRITE   // GPIOA
MAP 0x40020400, 0x400207FF READ WRITE   // GPIOB
MAP 0x40020800, 0x40020BFF READ WRITE   // GPIOC
MAP 0x40020C00, 0x40020FFF READ WRITE   // GPIOD
MAP 0x40021000, 0x400213FF READ WRITE   // GPIOE
MAP 0x40021400, 0x400217FF READ WRITE   // GPIOF
MAP 0x40021800, 0x40021BFF READ WRITE   // GPIOG
MAP 0x40021C00, 0x40021FFF READ WRITE   // GPIOH
MAP 0x40022000, 0x400223FF READ WRITE   // GPIOI
MAP 0x40023800, 0x40023BFF READ WRITE   // RCC (CRITICAL - addresses 0x40023800-0x40023BFF)
MAP 0x40023C00, 0x40023FFF READ WRITE   // Flash Interface
MAP 0x40026000, 0x400263FF READ WRITE   // DMA1
MAP 0x40026400, 0x400267FF READ WRITE   // DMA2
MAP 0x40028000, 0x400283FF READ WRITE   // Ethernet MAC
MAP 0x40029000, 0x400293FF READ WRITE   // DMA2D
MAP 0x50000000, 0x500003FF READ WRITE   // USB OTG FS
MAP 0x50060000, 0x500603FF READ WRITE   // USB OTG HS

// Cortex-M4 Core Peripherals
MAP 0xE0000000, 0xE0000FFF READ WRITE   // ITM
MAP 0xE0001000, 0xE0001FFF READ WRITE   // DWT
MAP 0xE0002000, 0xE0002FFF READ WRITE   // FPB
MAP 0xE000E000, 0xE000EFFF READ WRITE   // SCS (System Control Space)
MAP 0xE0040000, 0xE0040FFF READ WRITE   // TPIU
MAP 0xE0042000, 0xE0042FFF READ WRITE   // ETM

// Memory regions
MAP 0x08000000, 0x080FFFFF READ EXEC    // Flash memory (1MB for STM32F407)
MAP 0x1FFF0000, 0x1FFF7FFF READ EXEC    // System memory (bootloader)
MAP 0x1FFFC000, 0x1FFFC00F READ         // Option bytes
MAP 0x20000000, 0x2001FFFF READ WRITE   // SRAM (128KB)
MAP 0x10000000, 0x1000FFFF READ WRITE   // CCM RAM (64KB)

If you want to set initial values in debug.ini, you can add commands like:


InstructionSet.g_u16_PerUnitPrsVal = 0x0BB8  // Set to 3000 decimal
temple_min_cur_ref = 0x01F4                   // Set to 500 decimal