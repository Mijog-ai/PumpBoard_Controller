# MCUViewer Variable Configuration for PumpBoard Controller
# ============================================================
# Import this file in MCUViewer to monitor real-time PID control

# === SETPOINTS (what you want to achieve) ===
InstructionSet.TiltAngRef              # Angle setpoint (0-10000)
InstructionSet.g_u16_PerUnitPrsVal     # Pressure setpoint (0-6000)
InstructionSet.Cur_A_Ref               # Current A setpoint (mA)
InstructionSet.Cur_B_Ref               # Current B setpoint (mA)

# === FEEDBACK VALUES (actual measurements) ===
DetectorFdbVal.g_u32_AngFdb            # Angle feedback (0-10000)
DetectorFdbVal.g_u32_PressureFdb       # Pressure feedback (0-6000)
DetectorFdbVal.g_f32_PressureFdb       # Pressure feedback in bar
DetectorFdbVal.g_s32_CurFdb_A          # Current A feedback (mA)
DetectorFdbVal.g_s32_CurFdb_B          # Current B feedback (mA)

# === PID CONTROLLER STATES ===
# Angle Loop PID
Angle_Loop.Kp                          # Proportional gain
Angle_Loop.Ki                          # Integral gain
Angle_Loop.Kd                          # Derivative gain
Angle_Loop.err                         # Current error
Angle_Loop.err_last                    # Previous error
Angle_Loop.integral                    # Integral accumulator
Angle_Loop.output                      # PID output

# Pressure Loop PID
Pressure_Loop.Kp                       # Proportional gain
Pressure_Loop.Ki                       # Integral gain
Pressure_Loop.Kd                       # Derivative gain
Pressure_Loop.err                      # Current error
Pressure_Loop.integral                 # Integral accumulator
Pressure_Loop.output                   # PID output

# Current Loop PIDs
Pwm_Output_A.err                       # Current A error
Pwm_Output_A.output                    # PWM A output
Pwm_Output_B.err                       # Current B error
Pwm_Output_B.output                    # PWM B output

# === PWM OUTPUTS ===
g_u32_PWMOutput_A                      # PWM duty cycle A
g_u32_PWMOutput_B                      # PWM duty cycle B

# === SYSTEM STATUS ===
User_Parameter.PpqEna->PumpStrt_Ena    # Pump enabled flag
User_Parameter.PpqEna->PrsLoop_Ena     # Pressure loop enabled
User_Parameter.PpqEna->AngLeak_Ena     # Leakage compensation enabled
User_Parameter.PpqEna->PwrLoop_Ena     # Power loop enabled

# === FILTERED SENSOR DATA ===
ScopeVal.g_f32_Filter_SwivelAngle      # Filtered angle sensor
ScopeVal.g_f32_Filter_PressureData     # Filtered pressure sensor

# === TIMING COUNTERS ===
TimCnt.g_u16_Ang_PI_LOOP_Cnt          # Angle loop counter
TimCnt.g_u16_Prs_PI_LOOP_Cnt          # Pressure loop counter
